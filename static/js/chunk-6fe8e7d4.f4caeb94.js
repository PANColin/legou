(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fe8e7d4"],{1912:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"goods-detail-index"},[e("van-sticky",[e("van-nav-bar",{attrs:{title:"乐购","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("van-swipe",{attrs:{autoplay:3e3}},t._l(t.data.gallery,(function(t){return e("van-swipe-item",{key:t.id},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.img_url,expression:"item.img_url"}],attrs:{width:"100%"}})])})),1),t._m(0),e("div",{staticClass:"dec"},[e("div",{staticClass:"dec-top"},[e("h2",[t._v(t._s(t.info.name))]),e("p",{staticClass:"des"},[t._v(t._s(t.info.goods_brief))]),e("p",{staticClass:"price"},[t._v("￥"+t._s(t.info.retail_price))])]),e("van-cell",{attrs:{title:"请选择规格数量","is-link":""},on:{click:function(n){t.show=!t.show}}}),e("van-action-sheet",{attrs:{title:"请选择规格数量"},model:{value:t.show,callback:function(n){t.show=n},expression:"show"}},[e("div",{staticClass:"content"},[e("van-image",{attrs:{width:"100",height:"100",src:t.info.primary_pic_url}}),e("div",{staticClass:"right"},[e("p",{staticClass:"price"},[t._v("价格 ￥"+t._s(t.info.retail_price))]),e("p",[t._v("当前库存数"+t._s(t.info.goods_number))])])],1),e("p",[t._v("请选择数量："+t._s(t.num))]),e("van-stepper",{attrs:{min:"1",max:t.info.goods_number,integer:""},model:{value:t.num,callback:function(n){t.num=n},expression:"num"}})],1)],1),e("div",{staticClass:"attribute"},[e("h2",[t._v("商品参数")]),e("ul",t._l(t.data.attribute,(function(n){return e("li",{key:n.id},[e("span",[t._v(t._s(n.name)+": ")]),e("span",[t._v(t._s(n.value))])])})),0)]),e("div",{staticClass:"detail",domProps:{innerHTML:t._s(t.info.goods_desc)}}),e("div",{staticClass:"issue"},[t._m(1),e("ul",{staticClass:"issue-ul"},t._l(t.data.issue,(function(n){return e("li",{key:n.id},[e("p",[e("span"),t._v(t._s(n.question))]),e("p",[t._v(t._s(n.answer))])])})),0)]),e("good-show-no-head",{attrs:{list:t.data.productList},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"top"},[e("hr"),t._v(" 大家都在看 "),e("hr")])]},proxy:!0}])}),e("van-goods-action",[e("van-goods-action-icon",{attrs:{icon:"shop-o",text:"店铺"}}),e("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物车",badge:t.data.allnumber,to:"/shopcart"}}),t.collect?e("van-goods-action-icon",{attrs:{icon:"star",text:"已收藏",color:"#ff5000"},on:{click:t.addcollect}}):e("van-goods-action-icon",{attrs:{icon:"star-o",text:"收藏"},on:{click:t.addcollect}}),e("van-goods-action-button",{attrs:{color:"#be99ff",type:"warning",text:"加入购物车"},on:{click:t.onClickAddCart}}),e("van-goods-action-button",{attrs:{color:"#7232dd",type:"danger",text:"立即购买"},on:{click:t.onClickBuyImm}})],1)],1)])},i=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wuyou"},[e("p",[e("span"),t._v(" 30天无忧退货")]),e("p",[e("span"),t._v(" 48小时快速退款")]),e("p",[e("span"),t._v(" 满88元免邮费")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"top"},[e("hr"),t._v(" 常见问题 "),e("hr")])}],o=(e("e7e5"),e("d399")),s=e("0c6d");function c(t){return Object(s["a"])({url:"goods/detailaction",data:t})}var r=e("3a10"),d=e("ad9a"),l=e("9dbf"),u=e("86c5"),f={name:"Goodsdetail",components:{GoodShowNoHead:u["a"]},data:function(){return{imgs:[],info:{},data:{},show:!1,num:0,collect:!1}},mounted:function(){this.init()},computed:{},methods:{init:function(){var t=this;c({id:this.$route.query.id,openId:localStorage.getItem("openId")}).then((function(n){t.imgs=n.data.gallery,t.info=n.data.info,t.data=n.data,t.collect=n.data.collected}))},addcollect:function(){var t=this;Object(l["a"])({goodsId:this.info.id,openId:localStorage.getItem("openId")}).then((function(n){if("success"!==n.data.data)return Object(o["a"])("添加收藏失败");t.collect=!t.collect,t.collect?Object(o["a"])("添加收藏成功"):Object(o["a"])("取消收藏成功")}))},onClickLeft:function(){this.$router.back()},onClickAddCart:function(){var t=this;this.show?Object(d["a"])({goodsId:this.info.id,number:this.num,openId:localStorage.getItem("openId")}).then((function(n){if("success"!==n.data.data)return Object(o["a"])("添加购物车失败");Object(o["a"])("添加购物车成功"),t.init()})):this.show=!0},onClickBuyImm:function(){var t=this;this.show?Object(r["b"])({allPrise:this.num*this.info.retail_price,goodsId:this.info.id,openId:localStorage.getItem("openId")}).then((function(n){if(!n.data.data)return Object(o["a"])("购买失败");t.$router.push("/order")})):this.show=!0}}},h=f,p=(e("35bf"),e("2877")),v=Object(p["a"])(h,a,i,!1,null,"dbfb0c3c",null);n["default"]=v.exports},"35bf":function(t,n,e){"use strict";e("a254")},"3a10":function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return o}));var a=e("0c6d");function i(t){return Object(a["a"])({url:"/order/detailAction",method:"get",data:t})}function o(t){return Object(a["a"])({url:"/order/submitAction",method:"POST",data:t})}},"86c5":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._t("title"),e("van-grid",{attrs:{border:!1,"column-num":2,gutter:4}},t._l(t.list,(function(n){return e("van-grid-item",{key:n.id,on:{click:function(e){return t.refresh(n)}}},[e("van-image",{attrs:{src:n.list_pic_url}}),e("div",{staticClass:"text"},[e("p",[t._v(t._s(n.name))]),e("p",{staticClass:"price"},[t._v("￥"+t._s(n.retail_price))])])],1)})),1)],2)},i=[],o={name:"Goodshownohead",components:{},props:["list"],data:function(){return{}},mounted:function(){},methods:{refresh:function(t){this.$router.push({path:"/gooddetail",query:{id:t.id}}),"/gooddetail"==this.$route.path&&this.$router.go(0),console.log("/gooddetail"==this.$route.path)}}},s=o,c=(e("f1bb"),e("2877")),r=Object(c["a"])(s,a,i,!1,null,"7d0a9787",null);n["a"]=r.exports},"9ea0":function(t,n,e){},a254:function(t,n,e){},ad9a:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return s}));var a=e("0c6d");function i(t){return Object(a["a"])({url:"/cart/cartList",method:"get",data:t})}function o(t){return Object(a["a"])({url:"/cart/deleteAction",method:"get",data:t})}function s(t){return Object(a["a"])({url:"/cart/addCart",method:"POST",data:t})}},f1bb:function(t,n,e){"use strict";e("9ea0")}}]);